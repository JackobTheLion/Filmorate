CREATE TABLE IF NOT EXISTS filmorate_users (
  "user_id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "email" varchar UNIQUE,
  "login" varchar,
  "name" varchar,
  "birthdate" date
);


CREATE TABLE IF NOT EXISTS ratings (
  "rating_id" Integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "rating" varchar
);

CREATE TABLE IF NOT EXISTS genre (
  "genre_id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "genre" varchar
);

CREATE TABLE IF NOT EXISTS films (
  "film_id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar UNIQUE,
  "description" varchar,
  "release_date" date,
  "duration" integer,
  "genre" integer REFERENCES genre ("genre_id"),
  "rating" Integer REFERENCES ratings ("rating_id")
);

CREATE TABLE IF NOT EXISTS likes (
  "film_id" integer,
  "user_id" integer
);

CREATE TABLE IF NOT EXISTS film_genre (
  "film_id" integer ,
  "genre" integer
);

CREATE TABLE IF NOT EXISTS friends (
  "user1_id" integer,
  "user2_id" integer,
  "confirmed" Boolean DEFAULT false,
   CONSTRAINT not_self_friend CHECK ("user1_id" != "user2_id")
);

